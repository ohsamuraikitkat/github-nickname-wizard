# GitHub Nickname Wizard (Browser extension)

GitHub Nickname Wizard は、GitHub のユーザー名にニックネームを付加して、ユーザーを識別しやすくするブラウザの拡張機能です。

---

## ✨ 機能

**基本機能:**
* ニックネーム表示箇所
  * Organization の People 一覧
  * Team のメンバー 一覧
  * Project ボードのアバターツールチップ
  * リポジトリの Issue 一覧とアバターのホバー情報
  * リポジトリの Pull Request 一覧とアバターのツールチップ
  * Issue や Pull Request 内
  * **Issue右サイドバーのassigneeドロップダウンメニュー**

**管理機能:**
* ニックネームの追加方法
  * 拡張機能のポップアップUIからの登録
  * **コンテキストメニューからの直接登録**: GitHub上でユーザー名を選択して右クリックから簡単に登録可能
  * **ユーザーカードからのワンクリック登録**: ユーザープロフィールのホバーカードに表示される「ニックネームを追加」ボタンから直接登録可能
* 既存のニックネームの編集、個別の削除を簡単に行えます。
* インポート/エクスポート: ニックネームリストを JSON ファイルにエクスポートし、後でインポートできます。
* Gist同期機能: GitHub Gistを通じてチームメンバーとニックネーム設定を共有し、設定を同期できます。
* 厳格モード: 特定の信頼できるURLでのみ拡張機能を有効にする機能。ワイルドカードや正規表現によるURLパターン指定が可能です。

---

## 🚀 インストール方法

1.  このリポジトリをクローンするか、ソースコードをダウンロードします。
2.  Chromeを開き、`chrome://extensions/` にアクセスします。
3.  右上の「デベロッパーモード」を有効にします。
4.  「パッケージ化されていない拡張機能を読み込む」をクリックし、拡張機能のファイルが含まれるディレクトリを選択します。

---

## 🧩 使用方法

**ニックネームの追加（ポップアップUI経由）:**
1.  ブラウザのツールバーにある拡張機能アイコンをクリックしてポップアップを開きます。
2.  対象の GitHub ユーザー名（`@`なし）を入力します。
3.  希望するニックネーム（例: 「山田 太郎」）を入力します。
4.  「追加」ボタンをクリックします。

**ニックネームの追加（コンテキストメニュー経由）:**
1.  GitHub上で任意のユーザー名を選択します（@付きでも@なしでも可）。
2.  選択したテキスト上で右クリックし、「このユーザー名にニックネームを登録」を選択します。
3.  表示されるポップアップウィンドウにニックネームを入力します（GitHubのプロフィール情報から実名が自動提案されます）。
4.  「保存」ボタンをクリックします。

**設定のインポート/エクスポート:**
1.  「Export Settings」をクリックして、現在のニックネーム、カスタムソート順、テーマを `config.json` ファイルに保存します。
2.  ファイル入力エリアをクリックし、以前にエクスポートした JSON ファイルを選択し、「Import Settings」をクリックして読み込みます。

**Gist同期機能の使用方法:**
1.  ブラウザのツールバーにある拡張機能アイコンをクリックしてポップアップを開きます。
2.  「Gist Sync Settings」セクションに移動します。
3.  設定を含むGitHub Gistを作成します（まず設定をエクスポートし、そのコンテンツを使うと便利です）。
4.  入力欄にGist ID（GistのURLにある英数字の部分）を入力します。
5.  「Sync Now」ボタンをクリックして設定を同期します。
6.  必要に応じて「自動同期を有効にする」をオンにすると、自動的に設定が同期されます。
7.  チームメンバーとGist IDを共有すれば、同じ設定を同期して使用できます。

**厳格モードの設定:**
1.  ポップアップUIの「Strict Mode Settings」セクションでチェックボックスをオンにして厳格モードを有効にします。
2.  信頼するURLパターンを入力します。以下の形式がサポートされています：
    * 完全一致: `https://github.com/your-org/repo-name`
    * ワイルドカード: `https://github.com/your-org/*`
    * 正規表現: `regex:github\.com\/your-org\/[^/]+\/issues`
3.  「Add」ボタンをクリックしてパターンを追加します。
4.  追加したパターンは一覧で表示され、不要になれば削除できます。

---

## 🛠️ 拡張機能の構成

```
github-nickname-wizard/
├── manifest.json      # Chrome 拡張機能定義ファイル
├── background.js      # バックグラウンドスクリプト（コンテキストメニュー処理など）
├── content.js         # GitHub ページの DOM を変更し、ニックネームを挿入するスクリプト
├── popup.html         # 拡張機能アイコンのポップアップ UI
├── popup.js           # ポップアップ UI のロジック
├── quick-add.html     # コンテキストメニューから呼び出されるクイック追加 UI
├── quick-add.js       # クイック追加 UI のロジック
├── config.json        # 設定ファイル（デフォルト設定などに使用する場合）
└── icon.png           # 拡張機能のアイコン画像
```

---

## ⚙️ 設計

*   GitHub に表示名を追加するために DOM を直接変更します。
*   重複した置換を防ぐために、処理済みの要素に `data-*` 属性（例: `data-realname-injected`）を追加します。
*   `MutationObserver` を使用してページのコンテンツ変更を監視し、動的に読み込まれる要素を処理します。
*   表示名のマッピングと設定を `chrome.storage.local` に保存します。
*   ニックネームと設定を管理するための直感的なポップアップ UI を提供します。
*   コンテキストメニュー機能はバックグラウンドスクリプトで実装し、GitHubページ上の選択テキストから直接ニックネームを追加できます。
*   GitHubのパブリックAPIを活用して、ユーザーの実名情報を自動的に取得し、ニックネーム候補として提案します。
*   厳格モードでは、現在のURLが登録済みパターンに一致するかチェックし、一致した場合のみニックネームを表示します。
*   URLパターンのマッチングには完全一致、ワイルドカード、および正規表現の3つの方式をサポートしています。

---

## 📝 更新履歴

### v1.3.0 (2025-04-22)
*   Issue右サイドバーのassigneeドロップダウンメニューにニックネームを表示する機能を追加
*   GitHub UIの変更に対応するためのDOM検出機能を改善
*   コンソールログを最適化し、ブラウザの開発ツール表示をクリーンに

### v1.2.0 (2025-03-30)
*   コンテキストメニューからニックネームを直接登録する機能を追加
*   GitHubのパブリックAPIを活用したユーザー実名の自動提案機能
*   セキュリティ強化（Content Security Policyの対応）

### v1.1.0 (2025-03-30)
*   厳格モード機能を追加（特定の信頼できるURLでのみ動作するよう制限可能）
*   URLパターンマッチングに完全一致、ワイルドカード、正規表現をサポート
*   設定のインポート/エクスポート機能を厳格モード設定にも対応

### v1.0.0 (2025-03-30)
*   主要機能を含む初期リリース

---

## ⚠️ 注意事項

*   表示名はブラウザのローカルに保存され、他のユーザーと共有されたり、他のユーザーに見られたりすることは**ありません**。
*   GitHub のウェブサイト構造が変更されると、拡張機能の機能が一時的に動作しなくなる可能性があります。可能な場合は、そのような変更に対応するためのアップデートを提供します。

---

## 📄 ライセンス

このプロジェクトは MIT ライセンスの下でライセンスされています。
